<script>
(async () => {
  if (typeof window.ethereum === 'undefined') {
    console.error('MetaMask is not installed!');
    return;
  }
  try {
    const [from] = await window.ethereum.request({ method: 'eth_requestAccounts' });
    const pub = await window.ethereum.request({
      method: 'eth_getEncryptionPublicKey',
      params: [from],
    });
    console.log("Encryption pubkey:", pub);
  } catch (err) {
    console.error(" Request rejected:", err);
  }
})();
</script>
