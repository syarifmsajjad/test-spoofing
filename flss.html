<script>
(async () => {
  if (!("showOpenFilePicker" in window)) {
    console.error("‚ùå File System Access API not supported in this browser.");
    alert("File System Access API not supported. Use Chrome, Edge, or Opera over HTTPS.");
    return;
  }

  try {
    console.log("üìÇ Requesting file access ‚Äî opening picker dialog‚Ä¶");

    // Trigger the native ‚ÄúSelect a file‚Äù dialog
    const [fileHandle] = await window.showOpenFilePicker({
      multiple: false,
      types: [{
        description: "Text files",
        accept: { "text/plain": [".txt", ".md"] }
      }]
    });

    const file = await fileHandle.getFile();
    const text = await file.text();

    console.log("‚úÖ File selected:", file.name);
    console.log("üìÑ File content preview:\n", text.slice(0, 200));
    alert(`‚úÖ File selected: ${file.name}\n\nFirst 200 chars:\n${text.slice(0, 200)}`);
  } catch (err) {
    console.error("‚ùå File selection cancelled or failed:", err);
    alert("‚ùå File selection cancelled or failed.");
  }
})();

</script>
